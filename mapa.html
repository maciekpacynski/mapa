
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Mapa</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link rel="icon" type="image/x-icon" href="SUM.ico">
<!-- ===================== POPRAWKA WERSJI LEAFLET ===================== -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<!-- =================================================================== -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.css" />
<script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.js" charset="utf-8"></script>
<style>
/* ... (wszystkie twoje style bez zmian) ... */
.leaflet-control-locate a {{ font-size: 1.4em; color: #444; }}
body {{ margin:0; font-family: sans-serif; }}
#map {{ position:absolute; top:0; bottom:0; right:0; left:350px; }}
#sidebar {{ position:absolute; top:0; left:0; width:350px; bottom:0; overflow-y:auto; padding:15px; background:#f4f4f4; border-right:1px solid #ccc; font-size:14px; box-sizing: border-box; }}
</style>
</head>
<body>
<!-- ... (cały twój HTML bez zmian) ... -->
<div id="sidebar"> <div id="logo-container"><img src="SUM.png" alt="Logo SUM"></div> <!-- itd. --> </div>
<div id="map"></div>
<script>
// ... (cały twój JavaScript bez zmian) ...
// Twój kod `updateMarkers` będzie teraz działał poprawnie z nową wersją Leaflet.
const map = L.map('map').setView([54.5, 18.5], 10);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19, attribution: '&copy; OpenStreetMap'}).addTo(map);
const locateControl = L.control.locate({ position: 'topleft', flyTo: true, strings: { title: "Pokaż moją lokalizację" }, locateOptions: { enableHighAccuracy: true, maxZoom: 16 } }).addTo(map);
// ... reszta ...
</script>
</body>
</html>
